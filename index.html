<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <title>index</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-bbe7401fe57d4b791b917637bb662036.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="introduction-to-qupath" class="slide level2">
<h2>Introduction to QuPath</h2>
<p><strong>Peter Sobolewski (he/him)</strong></p>
<p>Systems Analyst, Imaging Applications</p>
<p>Research IT</p>
<div class="columns" style="display: flex">
<div class="column" style="display: flex; justify-content: left; align-items: center;">
<h3 id="httpsqupath.github.io"><a href="https://qupath.github.io">https://qupath.github.io</a></h3>
</div><div class="column" style="display: flex; justify-content: center;">
<p><img data-src="images/qupath_128.png" alt="QuPath logo" width="250"></p>
</div></div>
</section>
<section id="lesson-plan" class="slide level2">
<h2>Lesson Plan</h2>
<ul>
<li>Brief introduction to QuPath</li>
<li>Key concept: Projects</li>
<li>QuPath GUI layout and toolbars</li>
<li>Making &amp; Managing Annotations</li>
<li>Setting stain Vectors</li>
<li>Pixel classification using a thresholder</li>
</ul>
</section>
<section id="what-is-qupath" class="slide level2">
<h2>What is QuPath?</h2>
<p>QuPath is an open-source image analysis program</p>
<p><br></p>
<p><strong>Key feature</strong>:<br>
QuPath has a graphical user interface (<code>GUI</code>) for performant working with very large 2D images, like those produced by slide scanners</p>
</section>
<section id="a-bit-of-background" class="slide level2">
<h2>A bit of background</h2>
<ul>
<li>project was started at The Queenâ€™s University Belfast by Pete Bankhead</li>
<li>first public release was in October 2016</li>
<li>currently developed by <a href="https://www.ed.ac.uk/pathology/people/staff-students/peter-bankhead">Pete Bankheadâ€™s group at The University of Edinburgh</a></li>
<li>&gt;7500 publications <a href="https://scholar.google.com/scholar?start=0&amp;q=qupath">using QuPath</a></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>If you use it, cite it!</strong></p>
</div>
<div class="callout-content">
<p><a href="https://qupath.readthedocs.io/en/stable/docs/intro/citing.html">https://qupath.readthedocs.io/en/stable/docs/intro/citing.html</a></p>
</div>
</div>
</div>
</section>
<section id="strengths-of-qupath" class="slide level2">
<h2>Strengths of QuPath</h2>
<ul>
<li><p>Was designed for very large, multiscale 2D files</p></li>
<li><p>Includes extensive annotation, overlay, and visualization options</p></li>
<li><p>It includes robust algorithms for common analysis tasks</p></li>
<li><p>It includes <em>interactive</em> machine learning for pixel and object classification</p></li>
<li><p>Recordable workflows allow for easy batch processing</p></li>
<li><p>Integrated ImageJ</p></li>
<li><p>Robust scripting support (Groovy)</p></li>
</ul>
</section>
<section id="limitations" class="slide level2">
<h2>Limitations</h2>
<ul>
<li><p>Limited <em>3D &amp; time series viewing</em> capabilities:</p>
<ul>
<li>single planes only</li>
</ul></li>
<li><p>Some complex functions require scripting</p></li>
<li><p>Extension ecosystem is relatively limited</p></li>
<li><p>No support for zarr/NGFF</p></li>
</ul>
</section>
<section id="getting-help" class="slide level2">
<h2>Getting help</h2>
<ul>
<li>In-app documentation: Help menu</li>
<li>Online documentation: <a href="https://qupath.readthedocs.io/en/stable/index.html">https://qupath.readthedocs.io/en/stable/index.html</a>
<ul>
<li>Includes tutorials, scripting, advanced concepts</li>
</ul></li>
<li>YouTube Channel: <a href="https://www.youtube.com/c/QuPath">https://www.youtube.com/c/QuPath</a></li>
<li>Image.sc Forums: <a href="https://forum.image.sc/tag/qupath">https://forum.image.sc/tag/qupath</a></li>
</ul>
</section>
<section>
<section id="key-concept-qupath-project" class="title-slide slide level1 center">
<h1>Key concept: QuPath <code>project</code></h1>
<ul>
<li><code>projects</code> are the best way to organize your analysis work</li>
<li><code>projects</code> are frequently required by some scripts/extensions</li>
<li><code>projects</code> are folders:
<ul>
<li>group together related images</li>
<li>organize data, scripts, classifiers, etc.</li>
</ul></li>
</ul>
</section>
<section id="how-create-a-project" class="slide level2">
<h2>How create a project?</h2>
<ul>
<li><code>Create project</code> button</li>
<li>File â€£ Projectâ€¦ â€£ Create project</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>When making a project, remember to create a folder for it!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Drag-and-drop an <strong>empty</strong> folder</li>
</ul>
</section>
<section id="anatomy-of-a-qupath-project" class="slide level2">
<h2>Anatomy of a QuPath <code>project</code></h2>

<img data-src="images/project_folder.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot showing the contents of a QuPath project folder."></section>
<section id="how-to-add-images-to-a-project" class="slide level2">
<h2>How to add images to a project?</h2>
<ul>
<li>Drag and drop</li>
<li>File â€£ Projectâ€¦ â€£ Add images</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>image files will not be copied into your <code>project</code> folder!</strong></p>
</div>
<div class="callout-content">
<ul>
<li>A link (<code>URI</code>) will be used!</li>
<li>If you move the file(s) you will be prompted to update the link.</li>
</ul>
</div>
</div>
</div>

<aside><div>
<p>QuPath can handle large 2D images, e.g.&nbsp;whole-slide imagesâ€”<em>there is no need to make tiles first</em></p>
</div></aside></section>
<section id="qupath-will-never-edit-your-image-files" class="slide level2">
<h2>QuPath will never edit your image files!</h2>
<ul>
<li><code>images</code> in a <code>project</code> are actually QuPath objects holding metadata, annotations, etc.</li>
<li>The image data/pixels are accessed from the files via an <code>ImageServer</code></li>
<li>Duplicating/saving <code>images</code> within a <code>project</code> only relates to QuPath specific data, <strong>not</strong> the original files or pixels</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>When images are removed from a project, the data files are not deleted!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section></section>
<section>
<section id="lets-make-our-first-qupath-project" class="title-slide slide level1 center">
<h1>Letâ€™s make our first QuPath project!</h1>

</section>
<section id="launch-qupath" class="slide level2">
<h2>Launch QuPath</h2>

<img data-src="images/qupath_welcome.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot showing the QuPath welcome screen."></section>
<section id="click-create-project" class="slide level2">
<h2>Click <code>Create project</code></h2>

<img data-src="images/create_project_1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot showing the `create project` button in red."></section>
<section id="make-sure-to-make-a-new-empty-folder" class="slide level2">
<h2>Make sure to make a new, empty folder</h2>

<img data-src="images/create_project_2.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot showing the file browser with the `New Folder` button in red."></section>
<section id="select-the-empty-folder-for-the-project" class="slide level2">
<h2>Select the empty folder for the project</h2>

<img data-src="images/create_project_3.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot showing the file browser with empty project folder."></section>
<section id="add-an-image" class="slide level2">
<h2>Add an image</h2>

<img data-src="images/add_image_1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot showing the `Add images` button in red."><h3 id="use-drag-and-drop">Use drag-and-drop!</h3>
</section>
<section id="use-choose-filesor-drag-and-drop" class="slide level2">
<h2>Use <code>Choose files</code>â€”or drag-and-drop</h2>

<img data-src="images/add_image_2.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of `Import images to project` dialog with `Choose files` button in red."></section>
<section id="click-import" class="slide level2">
<h2>Click <code>Import</code></h2>

<img data-src="images/add_image_3.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of `Import images to project` dialog."><h3 id="defaults-are-ok-for-the-majority-of-cases">Defaults are OK for the majority of cases</h3>
</section>
<section id="set-image-type" class="slide level2">
<h2>Set Image type</h2>

<img data-src="images/set_image_type.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of `Set image type` dialog."><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>This affects the behavior of tools &amp; features! (but you can change it)</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="qupath-project-with-an-image" class="slide level2">
<h2><span class="emoji" data-emoji="tada">ðŸŽ‰</span> QuPath project with an image <span class="emoji" data-emoji="tada">ðŸŽ‰</span></h2>

<img data-src="images/QuPath_main_window.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath application window with a single image in the `Analysis pane`."></section></section>
<section>
<section id="qupath-gui-layout" class="title-slide slide level1 center">
<h1>QuPath GUI layout</h1>

</section>
<section id="analysis-pane-project-tab" class="slide level2">
<h2>Analysis Pane: Project tab</h2>

<img data-src="images/analysis_pane.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window with a single image in the `Analysis pane` Project tab."><h3 id="double-click-an-image-to-open-it-in-the-viewer-on-the-right-it-will-be-bolded-in-the-list">Double-click an image to open it in the <code>viewer</code> on the right â€“ it will be bolded in the list</h3>
</section>
<section id="analysis-pane-project-tab-1" class="slide level2">
<h2>Analysis Pane: Project tab</h2>
<h3 id="right-click-on-images-to">Right-click on images to:</h3>
<ul>
<li>Rename, remove or duplicate
<ul>
<li>When you duplicate, can choose to also copy the QuPath object data files</li>
</ul></li>
<li>To add metadata or descriptions</li>
<li>Blind/Mask samples: replace names with hashes</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>These changes only affect the QuPath objects in this project, not your data files!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="analysis-pane-image-tab" class="slide level2">
<h2>Analysis Pane: Image tab</h2>

<img data-src="images/analysis_pane_image.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window `Analysis pane` with CMU-1.svs image open."></section>
<section id="analysis-pane-image-tab-1" class="slide level2">
<h2>Analysis Pane: Image tab</h2>
<ul>
<li>Name and location of the image file</li>
<li>Pixel width/height: scale calibration, <strong>very important</strong>
<ul>
<li>can set yourself using a <code>Line</code> annotation</li>
</ul></li>
<li>Server type: how QuPath is reading the raw image file, set at import</li>
<li>Pyramid: levels of downsampling for performance</li>
<li>Image type: determines some default functions, e.g.&nbsp;channel information</li>
</ul>
</section>
<section id="qupath-viewer" class="slide level2">
<h2>QuPath viewer</h2>

<img data-src="images/qupath_viewer.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath application window with elements of the viewer highlighted in red."><ul>
<li>Minimap: Image overview, allows for quick navigation</li>
<li>Info bar: gives Pixel coordinate and value</li>
<li>Right-click the viewer to close or make a grid</li>
</ul>
</section></section>
<section>
<section id="qupath-toolbar" class="title-slide slide level1 center">
<h1>QuPath toolbar</h1>

</section>
<section id="qupath-toolbar-1" class="slide level2">
<h2>QuPath toolbar</h2>

<img data-src="images/QuPath_toolbar.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath application window with the toolbar marked in red."></section>
<section id="qupath-toolbar-information" class="slide level2">
<h2>QuPath toolbar: information</h2>

<img data-src="images/QuPath_info_tools.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath application window with the Preferences, Log, and Interactive Help tools marked in red."></section>
<section id="qupath-toolbar-information-1" class="slide level2">
<h2>QuPath toolbar: information</h2>

<img data-src="images/toolbar_info_tools_inset.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window with the Preferences, Log, and Interactive Help tools marked in red."><ul>
<li>Preferences: settings that customize QuPath behavior, including look-and-feel, extensions, etc.</li>
<li>Log: message logger, showing Info, Warnings, and Errorsâ€”helpful when troubleshooting or asking for help
<ul>
<li><code>Dot</code> notifies of un-read Errors</li>
</ul></li>
<li><strong><em>Interactive Help</em></strong>: Provides contextual help based on state of application/viewer, what you mouse over, etc.
<ul>
<li><code>Dot</code> notifies for potential problems, will offer solutions</li>
</ul></li>
</ul>
</section>
<section id="qupath-toolbar-annotation-tools" class="slide level2">
<h2>QuPath toolbar: Annotation tools</h2>

<img data-src="images/QuPath_annotation_tools_1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing annotation tools in red."><ul>
<li><strong>+</strong> : Move tool: pan around the image or move objects</li>
<li>For the Polyline tool: double-click to end</li>
<li>Brush: the size scales with zoom level</li>
<li>Magic wand: context-aware brush that takes into account intensity &amp; zoom</li>
<li><code>S</code>: Switch to selection mode, where tools <em>select</em> objects instead</li>
</ul>
</section>
<section id="qupath-toolbar-brightness-contrast-zoom" class="slide level2">
<h2>QuPath toolbar: brightness &amp; contrast, zoom</h2>

<img data-src="images/toolbar_BC_zoom.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing B&amp;C and Zoom tools in red."><ul>
<li>Brightness &amp; contrast dialog also allows for control of channels and colormaps</li>
<li>Can manually specify a zoom level by double-click</li>
<li>Zoom button resets zoom to fit whole image in viewer</li>
</ul>
</section>
<section id="qupath-toolbar-showhide-fill-opacity" class="slide level2">
<h2>QuPath toolbar: show/hide &amp; fill, opacity</h2>

<img data-src="images/toolbar_show_hide.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing Annotation and Detection Show/Hide tools in red."><ul>
<li>Enable showing Annotations or Detections, plus whether they are filled</li>
<li><code>C</code>: show/hides pixel classification overlay</li>
<li>Slider controls opacity, so you can see through to the data beneath</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>If you canâ€™t see things you expect, check that they arenâ€™t hidden!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="qupath-toolbar-measurements-table-scripting" class="slide level2">
<h2>QuPath toolbar: measurements table &amp; scripting</h2>

<img data-src="images/toolbar_meas_script.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing the Measurement Table and Script Editor tools in red."><ul>
<li>Measurement Table drop-down menu enables opening a table view of measurements associated with different object types</li>
<li>The Script Editor is used for automation and advanced tasks</li>
</ul>
</section></section>
<section id="qupath-gui-pro-tip-command-list" class="title-slide slide level1 center">
<h1>QuPath GUI Pro-tip: Command list</h1>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>For menu items, press <code>Command/Control-L</code> and start typing what you remember to get the menu item/command!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>

<img data-src="images/command_list.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Command list` dialog, with the filter box marked in red."></section>

<section>
<section id="making-managing-annotations" class="title-slide slide level1 center">
<h1>Making &amp; Managing Annotations</h1>

</section>
<section id="annotation-tool-keybindings" class="slide level2">
<h2>Annotation tool keybindings</h2>
<ul>
<li>Tools are also accessible in the <code>Tools</code> menu, which shows the shortcuts</li>
</ul>

<img data-src="images/QuPath_tools_menu.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath  window (top left) showing annotation the Tools menu."></section>
<section id="annotation-tool-preferences" class="slide level2">
<h2>Annotation tool preferences</h2>

<img data-src="images/Pref_drawing_tools.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath  Preferences dialog showing the settings for the drawing tools."></section>
<section id="annotation-tool-tips-and-tricks" class="slide level2">
<h2>Annotation tool tips and tricks</h2>
<ul>
<li>Annotations are editable, unless you lock them (Right-click â€£ Lock)</li>
<li>Move tool can be toggled with <code>Space bar</code>
<ul>
<li>Double-click to <em>select</em> objects</li>
</ul></li>
<li>For Ellipse &amp; Rectangle can also use Objects â€£ Annotationsâ€¦ â€£ Specify annotation</li>
<li>To start fresh: Objects â€£ Deleteâ€¦ â€£ Delete all annotations</li>
<li>Brush and Wand scale with zoom; they become more precise as you zoom in</li>
</ul>
</section>
<section id="annotation-tool-tips-and-tricks-1" class="slide level2">
<h2>Annotation tool tips and tricks</h2>
<ul>
<li>You can use the Brush or Wand tool to refine selected Annotations
<ul>
<li>start from the <em>inside</em> of the annotation, to expand it
<ul>
<li>Note: if you want to make an Annotation <em>inside</em> another Annotation, you need to first lock it.</li>
</ul></li>
<li>hold <code>Alt/Option</code> and start from the <em>outside</em> to reduce it</li>
</ul></li>
<li>Use <code>Shift</code> with the Brush or Wand to add to an Annotation (discontinuous)</li>
</ul>
</section>
<section id="annotations-exercise-1" class="slide level2">
<h2>Annotations exercise 1</h2>
<p><br></p>
<h3 id="take-a-few-minutes-to-try-out-the-different-tools">Take a few minutes to try out the different tools</h3>
</section>
<section id="analysis-pane-annotation-tab" class="slide level2">
<h2>Analysis Pane: Annotation tab</h2>

<img data-src="images/manage_annotations.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath  application  showing the Annotations tab of the Analysis Pane in red."><ul>
<li>Annotation list lets you select, delete
<ul>
<li>Right-click to <strong>lock</strong> or edit properties (name, color)</li>
<li>You can shift or control click to multi-select</li>
</ul></li>
<li>Classification list lets you assign Annotations to <code>classes</code></li>
</ul>
</section>
<section id="analysis-pane-annotation-tab-classes" class="slide level2">
<h2>Analysis Pane: Annotation tab: Classes</h2>

<img data-src="images/annotations_classes_submenu.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath  application  showing the Annotations tab of the Analysis Pane with the Classes submenu shown in red."><ul>
<li>Classes group objects in a more powerful way than names</li>
<li>You can add your own classes or remove existing ones
<ul>
<li>Note: <code>Populate</code> commands refer to the <strong>class list</strong></li>
</ul></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Majority of QuPath functions rely on using Classes</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="analysis-pane-annotations-tab-set-and-autoset" class="slide level2">
<h2>Analysis Pane: Annotations tab: Set and autoset</h2>

<img data-src="images/annotations_classes_set.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath  application  showing the Annotations tab of the Analysis Pane with the `Set selected` and `Auto set` buttons shown in red."><ul>
<li><code>Set selected</code> assigns all selected Annotations to a selected class</li>
<li><code>Auto set</code> assigns all new Annotations (regardless of type) to the selected class</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Classes with a <code>*</code> are ignored in measurements, percentages, etc.</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="annotations-exercise-2" class="slide level2">
<h2>Annotations exercise 2</h2>
<ol type="1">
<li>Add a <code>Tissue</code> class</li>
<li>Make Annotations for each of the tissue slices</li>
<li>Assign the 4 Annotations to the <code>Tissue</code> class</li>
<li>Name the 4 Annotations <code>slice 1</code> through <code>slice 4</code> (left to right)</li>
</ol>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>First delete all annotations (Objects â€£ Deleteâ€¦) or duplicate the image (uncheck <code>Also duplicate data</code>)</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="analysis-pane-annotation-measurements" class="slide level2">
<h2>Analysis Pane: Annotation measurements</h2>

<img data-src="images/Annotation_measurements_1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath  application showing the Annotations measurements pane of the Annotations tab of the Analysis Pane."><ul>
<li>Annotations have basic Measurements that depend on their type (length, area, perimeter, etc.)</li>
</ul>
</section>
<section id="annotation-measurements-measurement-tables" class="slide level2">
<h2>Annotation measurements: measurement tables</h2>

<img data-src="images/toolbar_meas_script.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing the Measurement Table and Script Editor tools in red."><ul>
<li>You can generate a table using the <code>Show measurements table</code> Toolbar button</li>
</ul>
</section>
<section id="analysis-pane-hierarchy-tab" class="slide level2">
<h2>Analysis Pane: Hierarchy tab</h2>
<ul>
<li>Presents the relationship between objects:
<ul>
<li>Parent â€£ Child</li>
</ul></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>For Annotations, the entire area of a child must be inside the parent</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Objects â€£ Annotationsâ€¦ â€£ Resolve hierarchy
<ul>
<li>QuPath will place <strong>all</strong> child objects with parent objects</li>
</ul></li>
<li>Objects â€£ Annotationsâ€¦ â€£ Insert into hierarchy
<ul>
<li>QuPath will insert <strong>the selected</strong> objects into the hierarchy</li>
</ul></li>
</ul>
</section>
<section id="annotations-exercise-3" class="slide level2">
<h2>Annotations exercise 3</h2>
<ol type="1">
<li>Make a <code>Border</code> class</li>
<li>Make a few <code>Line</code> Annotations per tissue slice to measure the thickness of the dark purple edge region</li>
<li>Assign the lines to the <code>Border</code> class</li>
<li>Use <code>Resolve hierarchy</code> to assign the lines to slices</li>
<li>Browse the <code>Measurements table</code>: right-click to show just the <code>Border</code> class</li>
</ol>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>First <code>Lock</code> all of your <code>Tissue</code> Annotations to prevent accidental editing</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section></section>
<section>
<section id="setting-stain-vectors" class="title-slide slide level1 center">
<h1>Setting stain vectors</h1>

</section>
<section id="stain-separationdeconvolution" class="slide level2">
<h2>Stain separation/deconvolution</h2>
<ul>
<li>Aims to extract information about individual chromogenic stains from the RGB values of each pixel</li>
<li>e.g.&nbsp;convert (R, G, B) to (H, E, residual)</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>For fluorescence images, single channels are typically collected, so this isnâ€™t needed.</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>When you select <code>image type</code> on import, default separation is performed</li>
</ul>
</section>
<section id="start-with-a-clean-copy" class="slide level2">
<h2>Start with a clean copy</h2>
<ul>
<li>Letâ€™s start by duplicating our image:
<ul>
<li>Analysis Pane â€£ Projects tab</li>
<li>Right-click the image and select <code>Duplicate</code></li>
<li><strong>Un-check</strong> <code>Also duplicate data files</code></li>
</ul></li>
</ul>

<img data-src="images/duplicate_image_no_data.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Duplicate image` dialog, with `Also duplicate data files` in red."></section>
<section id="setting-stain-vectors-1" class="slide level2">
<h2>Setting stain vectors</h2>
<ul>
<li>Use Annotation tools to make a small Annotation that includes:
<ul>
<li>some background</li>
<li>some pixels of each stain</li>
</ul></li>
<li>Analyze â€£ Estimate stain vectors</li>
</ul>

<img data-src="images/Analyze_stain_vectors.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath Analyze menu with `Estimate stain vectors` highlighted in blue."></section>
<section id="estimate-stain-vectors" class="slide level2">
<h2>Estimate stain vectors</h2>

<img data-src="images/Est_stain_vec_modal.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Estimate stain vectors` dialog`."><ul>
<li>QuPath has detected that the most common pixel value (the mode) is different from the current background</li>
<li>Click <code>Yes</code> to set the new value</li>
</ul>
</section>
<section id="visual-stain-editor" class="slide level2">
<h2>Visual stain editor</h2>

<img data-src="images/visual_stain_editor.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Visual stain editor` dialog with red arrows indicating the handles of the stain vectors, as well as the Auto button and the `exclude unrecognized stains` checkbox."></section>
<section id="visual-stain-editor-1" class="slide level2">
<h2>Visual stain editor</h2>
<ul>
<li>At the bottom are settings for <code>Auto</code> vector estimation</li>
<li>Click <code>Auto</code> to get an initial estimate</li>
<li>Look at the color panels, which are views at the 3D color space from orthogonal sides
<ul>
<li>if you have other pixels, can try to exclude them (checkbox) and run Auto again</li>
</ul></li>
<li>want the vectors to encompass the reddish-pink-purple pixels (those of H&amp;E)</li>
<li>Can manually tweak the vectors by using the handles</li>
</ul>
</section>
<section id="checking-the-results-brightness-contrast" class="slide level2">
<h2>Checking the results: Brightness &amp; Contrast</h2>

<img data-src="images/brightness_contrast.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Brightness &amp; Contrast` dialog with red arrows indicating the handles of the stain vectors, as well as the Auto button and the `exclude unrecognized stains` checkbox."><ul>
<li>Want visual separation between stains and low residual</li>
</ul>
</section>
<section id="stain-vectors-exercise" class="slide level2">
<h2>Stain vectors exercise</h2>
<ol type="1">
<li>Make a duplicate image, uncheck <code>Also duplicate data</code>, and name it <code>vectors</code> (or similar)</li>
<li>Draw a small Annotation that includes both stains and background, ~30-50% background</li>
<li>Use <code>Analyze â€£ Estimate stain vectors</code> and the <code>Visual stain editor</code> to adjust the stain deconvolution</li>
<li>Use <code>Brightness &amp; Contrast</code> to check the H&amp;E color channels in different areas</li>
</ol>
</section></section>
<section>
<section id="automated-annotations-via-thresholding" class="title-slide slide level1 center">
<h1>Automated Annotations via Thresholding</h1>

</section>
<section id="thresholding-in-qupath" class="slide level2">
<h2>Thresholding in QuPath</h2>
<ul>
<li>Thresholding is a type of <code>Pixel Classification</code>
<ul>
<li>Is a given pixel above or below a certain numeric value?</li>
<li>Assign it to a Class</li>
</ul></li>
<li>Most commonly used to create Annotations, e.g.&nbsp;Tissue vs.&nbsp;background</li>
<li>Menu: Classify â€£ Pixel classification â€£ Create thresholder</li>
</ul>

<img data-src="images/classify_thresholder.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath menus: Classify > Pixel classification, with `Create thresholder` highlighted in blue."></section>
<section id="pixel-classification-create-thresholder" class="slide level2">
<h2>Pixel classification â€£ Create thresholder</h2>

<img data-src="images/Classify_create_thresholder.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Create thresholder` dialog highlighted in blue."></section>
<section id="thresholder-parameters" class="slide level2">
<h2>Thresholder parameters</h2>
<ul>
<li>Resolution: lower resolution is less computationally intensive, but loses details</li>
<li>Channel: channel(s) to compare vs.&nbsp;threshold
<ul>
<li>for RGB images or tissue detection, <code>Average channels</code> can be a good choice</li>
</ul></li>
<li>Prefilter: preprocessing to apply prior to thresholding
<ul>
<li>Gaussian is typical, to smooth out noise</li>
</ul></li>
<li>Smoothing sigma: radius of prefilter, in pixels</li>
</ul>
</section>
<section id="thresholder-parameters-1" class="slide level2">
<h2>Thresholder parameters</h2>
<ul>
<li><strong>Threshold</strong>: numeric value that will be used</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li>For RGB, white is (255, 255, 255) and black is (0, 0, 0)</li>
<li>For intensity channels (e.g.&nbsp;stains), 0 is background and higher values represent signal</li>
</ul>
</div>
</div>
</div>
<ul>
<li>Above threshold: the class that these pixels will be assigned to</li>
<li>Below threshold: the class that these pixels will be assigned to</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Double-click on <code>Above</code> or <code>Below</code> to swap classes!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="thresholder-post-processing" class="slide level2">
<h2>Thresholder post-processing</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>You need to save your thresholder before you can use it!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Measure: requires existing Annotations, gives areas and % of classes</li>
<li><strong>Create objects</strong>: creates objects and assigns them to the classes</li>
<li>Classify: assigns Detections to the classes</li>
</ul>
</section>
<section id="thresholder-create-objects" class="slide level2">
<h2>Thresholder: Create objects</h2>

<img data-src="images/Pixel_classifier_choose_parents.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog showing `Full image`."><ul>
<li>Choose the parent of the new objects, generally for Tissue you want it to be the image</li>
</ul>
</section>
<section id="thresholder-create-objects-1" class="slide level2">
<h2>Thresholder: Create objects</h2>

<img data-src="images/Create_objects.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Create objects` dialog."><p>We are segmenting 4 large tissue slices, so we want to make:</p>
<ul>
<li>Annotations, that are large, without holes</li>
<li>Separate objects (of the same class) for each slice</li>
</ul>
</section>
<section id="thresholder-load-classifier-to-reuse" class="slide level2">
<h2>Thresholder: Load classifier to reuse</h2>
<p>We saved our classifier (thresholder), so we can re-use it:</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/load_pixel_classifier_menu.png" class="quarto-figure quarto-figure-center" alt="Screenshot of QuPath `Classify` menu showing the `Load classifier` dialog."></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/load_pixel_classifier.png" class="quarto-figure quarto-figure-center" alt="Screenshot of QuPath `Load pixel classifier` dialog."></p>
</figure>
</div>
</section>
<section id="thresholder-exercise" class="slide level2">
<h2>Thresholder exercise</h2>
<ul>
<li>Duplicate your stain vectors image and delete any Annotations</li>
<li>Zoom so you see 1 or 2 whole tissue slices</li>
<li>Open <code>Pixel classification â€£ Create thresholder</code></li>
<li>Adjust parameters until you have the 4 tissue slices as class <code>Tissue</code></li>
<li>Save the classifier as <code>Tissue</code> (or similar)</li>
<li>Use <code>Create objects</code> to make 4 annotations, one for each slice</li>
</ul>
</section></section>
<section>
<section id="sharing-qupath-projects" class="title-slide slide level1 center">
<h1>Sharing QuPath projects</h1>

</section>
<section id="qupath-projects-are-portable" class="slide level2">
<h2>QuPath projects are portable</h2>
<h3 id="sharing-a-qupath-project">Sharing a QuPath project:</h3>
<ul>
<li>zip up the entire project directory</li>
<li>email or share it with a colleague</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>Ensure they can access the actual image files!<br>
The project folder only contains QuPath objects and data!<br>
The image files will not be inside the project (unless you had placed them there)!</strong></p>
</div>
</div>
</div>
</section>
<section id="receiving-a-qupath-project" class="slide level2">
<h2>Receiving a QuPath project</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>You will need to re-link the project to the location of the actual image files</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>

<img data-src="images/project_Update_URIs.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Update URIs` dialog."></section>
<section id="re-linking-images-update-uris" class="slide level2">
<h2>Re-linking images: Update URIs</h2>
<h4 id="double-click-each-red-image-and-choose-the-new-location-individually">Double-click each red image and choose the new location individually:</h4>

<img data-src="images/project_update_URIs_2.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Update URIs` dialog showing the `Choose URI` dialog."><h4 id="or-if-all-of-the-images-are-together-click-search-to-find-the-new-enclosing-folder">Or if all of the images are together, click <code>Searchâ€¦</code> to find the new enclosing folder</h4>
</section></section>
<section>
<section id="back-to-pixel-classification" class="title-slide slide level1 center">
<h1>Back to pixel classification</h1>

</section>
<section id="thresholder-measurement-exercise" class="slide level2">
<h2>Thresholder measurement exercise</h2>
<ul>
<li>Will need some parent objects: the Tissue annotations</li>
<li>Duplicate the image with the Tissue annotations generated by the thresholder</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Ensure <code>Also duplicate data</code> is checked!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Ensure just there are just 4 Annotations, one for each tissue slice</li>
</ul>
</section>
<section id="thresholding-within-an-annotation" class="slide level2">
<h2>Thresholding within an Annotation</h2>
<ul>
<li>Letâ€™s analyze the white areas within the <code>Tissue</code> Annotations
<ul>
<li>We had ensured they were filled before to get the areas of the slices</li>
</ul></li>
<li>Create a new Class: <code>White</code> or <code>lumens</code>, etc.</li>
<li><code>Classify â€£ Pixel classification â€£ Create thresholder</code></li>
<li>Adjust the properties of your Thresholder to highlight the hole-like areas as the new Class, while the rest is <code>Stroma</code></li>
</ul>
</section>
<section id="thresholding-within-an-annotation-1" class="slide level2">
<h2>Thresholding within an Annotation</h2>
<ul>
<li>Once you have reasonable segmentation, give the classifier a meaningful name and save it</li>
<li>To add area-based measurements to <em>our existing</em> <code>Tissue</code> Annotations, click <code>Measure</code></li>
</ul>

<img data-src="images/pix_class_measure.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog for creating measurements in Annotations."></section>
<section id="creating-objects-within-an-annotation" class="slide level2">
<h2>Creating objects within an Annotation</h2>
<ul>
<li>Use <code>Classify â€£ Pixel classification â€£ Load pixel classifier</code> and load the previous classifier</li>
<li>Click <code>Create objects</code> and select <code>All Annotations</code> for <code>Choose parent objects</code>:</li>
</ul>

<img data-src="images/pixel_class_parents_annotations.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog"></section>
<section id="create-objects-within-an-annotation" class="slide level2">
<h2>Create objects within an Annotation</h2>
<ul>
<li>We want one Annotation of the new class <em>per tissue slice</em></li>
<li>Select <code>Annotation</code> as <code>New object type</code></li>
<li>Enter a <code>Minimum object size</code>, the area of the things we want to detect, the lumens/holes, maybe 200 Âµm<sup>2</sup>?</li>
<li>Enter a similar value for <code>Minimum hole size</code>â€”this would be holes <em>within</em> the objects we are interested in!</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Ensure <code>Split objects</code> is <strong>not</strong> checked!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="create-objects-dialog" class="slide level2">
<h2>Create objects dialog</h2>

<img data-src="images/create_objects_dialog_holes.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Create objects` dialog with `Split objects` unchecked, highlighted in red."></section></section>
<section>
<section id="training-a-pixel-classifier" class="title-slide slide level1 center">
<h1>Training a Pixel classifier</h1>

</section>
<section id="going-beyond-thresholds" class="slide level2">
<h2>Going beyond thresholds</h2>
<ul>
<li>QuPath includes built in support for machine learning pixel classification</li>
<li>Classifiers can be trained, saved, and used for inference (classification)</li>
<li>Instead of a simple numeric cutoff, training uses Annotations of two <em>or more</em> classes and a number of different channels &amp; <code>features</code> (computed values per pixel)</li>
</ul>
</section>
<section id="training-a-pixel-classifier-setup" class="slide level2">
<h2>Training a pixel classifier: setup</h2>
<ul>
<li>Weâ€™re going to look at sub-regions of the tissue slices, so will need some parent objects, the Tissue annotations</li>
<li>Duplicate the image with the original Tissue annotations generated by the thresholder</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Ensure <code>Also duplicate data</code> is checked!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Ensure just there are just 4 Annotations, one for each tissue slice</li>
</ul>
</section>
<section id="training-a-pixel-classifier-setup-1" class="slide level2">
<h2>Training a pixel classifier: setup</h2>
<ul>
<li>Ensure you have three classes:
<ul>
<li>e.g.&nbsp;Stroma, border, lumens</li>
</ul></li>
<li>Use the Polyline tool (V) to <code>paint</code> a few squiggles in:
<ul>
<li>the dark purple/brown border areas, set class <code>border</code></li>
<li>the white <code>holes</code>, set class <code>lumens</code></li>
<li>other parts of the tissue slice, set class <code>Stroma</code></li>
</ul></li>
</ul>

<aside><div>
<p>We could make even moreâ€¦</p>
</div></aside></section>
<section id="training-a-pixel-classifier-1" class="slide level2">
<h2>Training a pixel classifier</h2>
<p><code>Classify â€£ Pixel classification â€£ Train pixel classifier</code></p>

<img data-src="images/classify_pix_train_pix.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Classify` menu showing the `Pixel classification` submenu with `Train pixel classifier` selected."></section>
<section id="training-a-pixel-classifier-2" class="slide level2">
<h2>Training a pixel classifier</h2>

<img data-src="images/train_pix_classifier.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog used to train the pixel classifier."></section>
<section id="pixel-classifier-key-settings" class="slide level2">
<h2>Pixel classifier: Key settings</h2>
<ul>
<li>Classifier: type of classifier, for initial work recommend <code>Random trees</code>, less of a black box can provide importance of features vs.&nbsp;ANN_MLP</li>
<li>Resolution: as before, controls the level of detail used as a trade-off to performance</li>
<li>Features: additional computed features to be used by the classifier</li>
<li>Output: single class per pixel or estimated probability of classes</li>
</ul>
</section>
<section id="pixel-classifier-random-trees" class="slide level2">
<h2>Pixel classifier: Random trees</h2>

<img data-src="images/Pix_class_RTrees.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog with the `Random trees` parameters shown. The `Edit` button and `Calculate variable importance` are marked in red."></section>
<section id="pixel-classifier-random-trees-variable-importance" class="slide level2">
<h2>Pixel classifier: Random trees: variable importance</h2>

<img data-src="images/Pix_class_Rtrees_var_import.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Log` showing `Variable importance`."></section>
<section id="pixel-classifier-selecting-features" class="slide level2">
<h2>Pixel classifier: selecting features</h2>

<img data-src="images/Pix_class_select_features.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog with the `Select features` dialog shown. The `Edit` button, `Channels`, `Scales`, and `Features` are marked in red."></section>
<section id="pixel-classifier-selecting-features-1" class="slide level2">
<h2>Pixel classifier: selecting features</h2>
<ul>
<li>Channels: choose channels that can discriminate the classes, typically the stains</li>
<li>Scales: controls the size of the smoothing/processing kernel, so can help identify (or suppress) details</li>
<li>Features: additional calculated transformations, can check their importance in the log (for RTrees only)</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Typically, <em>fewer</em>, but <em>well-chosen</em> features provides more robust results.</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="pixel-classifier-features" class="slide level2">
<h2>Pixel classifier: features</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>From QuPath docs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Gaussian filter</em></td>
<td>General-purpose</td>
</tr>
<tr class="even">
<td>Laplacian of Gaussian</td>
<td>Blob-like things, some edges</td>
</tr>
<tr class="odd">
<td><em>Weighted deviation</em></td>
<td>Textured vs.&nbsp;smooth areas</td>
</tr>
<tr class="even">
<td>Gradient magnitude</td>
<td>Edges</td>
</tr>
<tr class="odd">
<td>Structure tensor eigenvalues</td>
<td>Long, stringy things</td>
</tr>
<tr class="even">
<td>Structure tensor coherence</td>
<td>â€˜Orientedâ€™ regions</td>
</tr>
<tr class="odd">
<td>Hessian determinant</td>
<td>Blob-like things</td>
</tr>
<tr class="even">
<td>Hessian eigenvalues</td>
<td>Long, stringy things</td>
</tr>
</tbody>
</table>
</section>
<section id="pixel-classifier-visualizing-features" class="slide level2">
<h2>Pixel classifier: visualizing features</h2>

<img data-src="images/Pix_class_show_features.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog with the `Show classification` dropdown marked in red and showing a feature."><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Use the <code>C</code> key and opacity slider!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="pixel-classifier-advanced-options" class="slide level2">
<h2>Pixel classifier: advanced options</h2>

<img data-src="images/Pix_class_advanced_options.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Pixel classifier` dialog with the `Advanced options` dialog shown. The `Maximum samples` and `Reweight samples` options are marked in red."></section>
<section id="pixel-classifier-advanced-options-1" class="slide level2">
<h2>Pixel classifier: advanced options</h2>
<ul>
<li>Maximum samples: number of pixels from training Annotations used, if exceeded pixels will be sampled randomly</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Typically, using Polyline Annotation squiggles gives best results</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Reweight samples: weighs the training pixels by class balance</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Does not let you ignore class balance totally!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="pixel-classifier-exercise" class="slide level2">
<h2>Pixel classifier: exercise</h2>
<p>Using <code>Random trees</code> classifier, test out impact of classifier parameters, especially:</p>
<pre><code>- Resolution
- Features: use the `Log` to check importance</code></pre>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>You can add more Annotations!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<p>When reasonable, save the classifier and your image with training Annotations</p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Load and run your classifier (<code>Create objects</code>) on a fresh copy of the 4 Annotation image</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="pixel-classifier-final-tips" class="slide level2">
<h2>Pixel classifier: final tips</h2>
<ul>
<li>Can be easiest to make a project dedicated to training a classifier</li>
<li>Can annotate multiple images, save them, and then use <code>Load training</code> to add them to the training data</li>
<li>Once saved, you can copy the classifier to a new project for inference or use <code>Import from file</code> in the <code>Load pixel classifier</code> dialog</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Make a note of your features &amp; parameters, in case you want to train again!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section></section>
<section>
<section id="key-concept-qupath-objects" class="title-slide slide level1 center">
<h1>Key concept: QuPath objects</h1>

</section>
<section id="qupath-is-more-than-a-viewer" class="slide level2">
<h2>QuPath is more than a viewer</h2>
<h3 id="workflow">Workflow:</h3>
<ul>
<li>View pixels</li>
<li>Identify objects</li>
<li>Identify child objects
<ul>
<li>Count</li>
<li>Measure</li>
<li>Classify</li>
</ul></li>
</ul>
</section>
<section id="qupath-objects" class="slide level2">
<h2>QuPath Objects</h2>
<h3 id="all-qupath-objects-have">All QuPath objects have:</h3>
<ul>
<li>a name</li>
<li>a region of interest (ROI)</li>
<li>a class</li>
<li>measurements/features</li>
</ul>
</section>
<section id="annotations" class="slide level2">
<h2>Annotations</h2>
<ul>
<li>Large, <strong>editable</strong> objects</li>
<li>Manually made or via pixel classifier</li>
<li>Few default measurements (shape related)</li>
<li>More â€œcostlyâ€ computationally</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>You want to have few Annotations and use them as <em>parent objects</em></strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="detections" class="slide level2">
<h2>Detections</h2>
<ul>
<li>Small(er), <strong>non-editable</strong> objects</li>
<li>Generated by QuPath, within a parent object</li>
<li>Many default measurements (shape and intensity)</li>
<li>â€œCheapâ€ computationally, can have 100K+</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Detections can be classified!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="special-detections" class="slide level2">
<h2>Special Detections</h2>
<h3 id="cells">Cells</h3>
<ul>
<li>two ROI: cell boundary and nucleus (optional)</li>
<li>have shape and intensity measurements for both</li>
</ul>
<h3 id="tiles">Tiles</h3>
<ul>
<li>groups of pixels (superpixels)</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Superpixels donâ€™t have any default measurements</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>if classified, can be merged into Annotations</li>
</ul>
</section>
<section id="measurements-features" class="slide level2">
<h2>Measurements &amp; features</h2>
<ul>
<li>Measurements &amp; features can be summarized in tables for annotations and detections</li>
<li>Default measurements include shape-related measurements and intensity-related measurements (Detections)</li>
<li>Can be used to train a machine learning <em>object classifier</em></li>
<li>Additional measurements/features can be added using: <code>Analyze â€£ Calculate features</code></li>
</ul>
</section>
<section id="adding-additional-measurements" class="slide level2">
<h2>Adding additional measurements</h2>
<ul>
<li><code>Smoothed features</code>: use a weighted average of the corresponding measurements of neighboring objects</li>
<li><code>Intensity features</code>: mean, SD, etc. of channel intensities</li>
<li><code>Shape features</code>: Area, perimeter, caliper, etc.</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>By default:</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Annotations have only shape-related measurements</li>
<li>Cell detections have both shape and intensity measurements</li>
<li>Tile detections have no measurements</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="cell-detection" class="title-slide slide level1 center">
<h1>Cell detection</h1>

</section>
<section id="qupath-cell-detection" class="slide level2">
<h2>QuPath cell detection</h2>
<ul>
<li>built-in cell segmentation algorithm, based on thresholding
<ul>
<li>automatic tiling and parallel processing</li>
</ul></li>
<li>detects nucleus and then expands to get cell body</li>
<li>obtained Cell Detections will have shape and intensity measurements for both nucleus and cell</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML approaches including Cellpose and Stardist are available as extensions</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="detecting-cells-setup" class="slide level2">
<h2>Detecting cells: setup</h2>
<ul>
<li>Will need some parent objects: the Tissue annotations</li>
<li>Duplicate the image with the Tissue annotations generated by the thresholder</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Ensure <code>Also duplicate data</code> is checked!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Detection can be computationally intensive, so best to start with a small region</li>
<li>Draw a small rectangle ROI (500 Âµm x 500 Âµm), ensure itâ€™s selected</li>
</ul>
</section>
<section id="detecting-cells" class="slide level2">
<h2>Detecting cells</h2>
<p><code>Analyze â€£ Cell detection â€£ Cell detection</code></p>

<img data-src="images/menu_cell_detection.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Analyze` menu showing the `Cell detection` submenu."><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><code>Positive cell detection</code> allows setting additional intensity thresholds for scoring (e.g.&nbsp;DAB)</p>
</div>
</div>
</div>
</section>
<section id="cell-detection-dialog-top" class="slide level2">
<h2>Cell detection dialog (top)</h2>

<img data-src="images/cell_detection_top.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of top portion of QuPath `Cell detection` dialog"></section>
<section id="cell-detection-parameters-setup" class="slide level2">
<h2>Cell detection parameters: setup</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Defaults are frequently pretty good!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Detection image: the channel where nuclei are most apparent, typically <code>Hematoxylin OD</code>, but <code>OD Sum</code> can be useful for H-DAB</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Use B&amp;C dialog to take a look!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Requested pixel size: the resolution of the image used for the processing, enter <code>0</code> for native (full) resolution. Trade-off of speed vs.&nbsp;detail, 0.5 or 1 frequently good.</li>
</ul>
</section>
<section id="cell-detection-parameters-nucleus" class="slide level2">
<h2>Cell detection parameters: nucleus</h2>
<ul>
<li>Background radius: radius of area used for background subtraction, typically want it to be larger than the size of nuclei/clusters or set to <code>0</code> to disable</li>
<li>Opening by reconstruction: turn off if background isnâ€™t homogenous and you see tiling artifacts</li>
<li>Median filter radius: radius of median filter (smoothing), higher values will tend to reduce fragmentation, <code>0</code> to disable</li>
<li>Sigma: radius of gaussian filter (smoothing), higher values will tend to reduce fragmentation</li>
</ul>
</section>
<section id="cell-detection-dialog-middle" class="slide level2">
<h2>Cell detection dialog (middle)</h2>

<img data-src="images/cell_detection_middle.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of middle portion of QuPath `Cell detection` dialog"></section>
<section id="cell-detection-parameters-nucleus-intensity" class="slide level2">
<h2>Cell detection parameters: nucleus, intensity</h2>
<ul>
<li>Minimum area: area of smallest nuclei</li>
<li>Maximum area: area of largest nuclei</li>
<li>Threshold: minimum signal of nuclei (relative to background)</li>
<li>Max background intensity: if background subtraction was performed, can have regions ignored (e.g.&nbsp;tissue fold or staining artifact)</li>
<li>Split by shape: uses roundness to split clusters/clumps, generally want this ticked</li>
</ul>
</section>
<section id="cell-detection-dialog-bottom" class="slide level2">
<h2>Cell detection dialog (bottom)</h2>

<img data-src="images/cell_detection_bottom.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of bottom portion of QuPath `Cell detection` dialog"></section>
<section id="cell-detection-parameters-cell-general" class="slide level2">
<h2>Cell detection parameters: cell, general</h2>
<ul>
<li>Cell expansion: how much to expand nuclei by to get cell borders
<ul>
<li>can make it small to get peri-nuclear</li>
</ul></li>
<li>Include nucleus: to get nuclei as ROI ensure this is ticked</li>
<li>Smooth boundaries: smooths based on resolution, reduces memory usage, generally want it ticked</li>
<li>Make measurements: want this ticked to get measurements for the generated Detections</li>
</ul>
</section>
<section id="cell-detection-exercise" class="slide level2">
<h2>Cell detection exercise</h2>
<ul>
<li>Using your rectangular Annotation, test out the cell detection parameters, by re-running cell detection with different parameters e.g.
<ul>
<li>Requested pixel size</li>
<li>Median filter radius</li>
<li>Sigma</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<ul>
<li>You can see the number of counted cells in the Analysis pane Annotation tab</li>
<li>Press <code>D</code> to toggle showing Detections or <code>F</code> to toggle their Fill</li>
</ul>
</div>
</div>
</div>
</section>
<section id="running-cell-detection-on-our-slices" class="slide level2">
<h2>Running cell detection on our slices</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Depending on the parameters and power of your computer this can take a few minutes!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Delete the rectangular Annotation and <em>donâ€™t keep descendants</em> (the test Detections)</li>
<li>Select the Annotation of the slice you want to detect (or select all 4)</li>
<li>Click <code>Run</code> again if you have the <code>Cell detection</code> dialog open</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><code>Cell detection</code> parameters are not saved. If you closed the dialog your settings are lost, but can be recovered in the Analysis pane Workflow tab</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="using-the-workflows-tab" class="slide level2">
<h2>Using the Workflows tab</h2>

<img data-src="images/Workflow_cell_detection.png" class="quarto-figure quarto-figure-center r-stretch" alt="Inset of screenshot of QuPath application window (top left) showing the Analysis pane Workflow tab."><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Double click the Workflow step you want to re-run!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="using-the-workflows-tab-1" class="slide level2">
<h2>Using the Workflows tab</h2>
<ul>
<li>Workflow steps are saved for each image individually</li>
<li>Can create scripts from Workflows to easily repeat/reapply an analysis</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Use <code>Create workflow</code> button to remove any spurious steps prior to <code>Create script</code></strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Can also copy Workflow steps individually using right-click <code>Copy command</code> to paste into a script</li>
</ul>
</section>
<section id="detection-measurements" class="slide level2">
<h2>Detection measurements</h2>
<ul>
<li>Can see measurements in the Measurements table (<code>Show detection measurements</code>)
<ul>
<li>More export options: <code>Measure â€£ Export measurements</code></li>
</ul></li>
<li>Can also visualize using â€œheatâ€ maps of any Detection measurements: <code>Measure â€£ Show measurements maps</code>
<ul>
<li>can be informative for <code>Object classification</code></li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><code>Smoothed measurements</code> take into account local area of each cell and can be even more useful</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section></section>
<section>
<section id="object-classification-in-qupath" class="title-slide slide level1 center">
<h1>Object classification in QuPath</h1>

</section>
<section id="object-classification" class="slide level2">
<h2>Object classification</h2>
<ul>
<li>Both annotations and detections can be classified into classes using a ML classifier, like pixels</li>
<li>Object classifiers are trained using manual annotations of 2 or more Classes
<ul>
<li>Area-based Annotations (e.g.&nbsp;brush) or Points are best</li>
</ul></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Classification <em>requires</em> measurements!</li>
<li><strong>The same measurements</strong> must be present for both training and inference Objects</li>
</ul>
</div>
</div>
</div>
</section>
<section id="training-an-object-classifier" class="slide level2">
<h2>Training an Object classifier</h2>
<p><code>Classify â€£ Object classification â€£ Train object classifier</code></p>

<img data-src="images/classify_train_object_class.png" class="quarto-figure quarto-figure-center r-stretch" alt="Screenshot of QuPath `Train object classifier` dialog"></section>
<section id="training-an-object-classifier-1" class="slide level2">
<h2>Training an Object classifier</h2>
<ul>
<li>Similar to training the Pixel classifier, in terms of RTrees vs.&nbsp;ANN_MLP
<ul>
<li>Can log variable importance for RTrees</li>
</ul></li>
<li>Features: choose <code>Selected features</code> and click <code>Select</code> to reduce feature space</li>
<li>Classes: choose <code>Selected classes</code> and click <code>Select</code> to train on selected Classes only</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><code>Live update</code> applies the classifier</strong></p>
</div>
<div class="callout-content">
<ul>
<li>To clear the classifications use <code>Classify â€£ Object classification â€£ Reset detection classifications</code></li>
</ul>
</div>
</div>
</div>
</section>
<section id="object-classifier-exercise" class="slide level2">
<h2>Object classifier exercise</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>This only makes sense if you ran Cell detection on a tissue slice</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<ul>
<li>Use the brush tool to annotate Detections corresponding to three classes:
<ul>
<li><code>border</code>: the dark purple/brown area at the edge</li>
<li><code>Tumor</code>: the islands of dense hematoxylin staining</li>
<li><code>Stroma</code>: other areas of the slice</li>
</ul></li>
<li>Test the effect of the Object classification training parameters</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Press <code>D</code> to toggle showing Detections or <code>F</code> to toggle their Fill</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="additional-object-classification-features" class="slide level2">
<h2>Additional Object classification features</h2>
<ul>
<li>Add intensity-based sub-classification (e.g.&nbsp;for DAB): <code>Classify â€£ Object classification â€£ Set cell intensity classifications</code></li>
<li>Use density maps to visualize detections: <code>Analyze â€£ Density maps â€£ Create density map</code>
<ul>
<li>these can be converted into Annotations (ROI)</li>
</ul></li>
</ul>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/JAX_logo_rgb_transparentback.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Imaging Applications, Research IT</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>